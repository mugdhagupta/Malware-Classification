#!/usr/bin/python

import os, subprocess
import hashlib

malware_directories = <path_of_malware_directory>

count = 0
pecount = 0
for root, dirs, files in os.walk(malware_directories):
	for f in files:
		count += 1		
		filename = os.path.join(root, f)
		print filename
		print count		
		try:
			file_output = subprocess.check_output(['file', filename])
		except Exception:
			file_output = None
		
		if file_output != None:
			if 'PE32' not in file_output.split():
				os.remove(filename)
				pecount += 1

def remEmptyDir(malware_directories):
	for root, dirs, files in os.walk(malware_directories,topdown=False):
	     for name in dirs:
		 fname = os.path.join(root,name)
		 if not os.listdir(fname): #to check wither the dir is empty
		     print fname
		     os.removedirs(fname)


remEmptyDir(malware_directories)
print pecount
